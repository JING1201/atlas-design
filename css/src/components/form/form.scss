/* stylelint-disable max-nesting-depth, selector-max-specificity  */

$form-font-size: $font-size-7;
$form-font-size-sm: $font-size-8;
$form-font-size-lg: $font-size-6;

$icon-size: 2.25em;

$icon-color: $secondary-background !default;
$icon-active-color: $secondary !default;

.field {
	position: relative;
	font-size: $form-font-size;
	text-align: left;

	&:not(:last-child) {
		margin-block-end: 0.75rem;
	}

	.field-section {
		.field-section-label {
			margin-block-end: $spacer-3;

			@include tablet {
				flex: 1 0 0;

				&.field-section-label-sm {
					font-size: $form-font-size-sm;
				}

				&.field-section-label-lg {
					font-size: $form-font-size-lg;
				}
			}
		}

		.field-section-note {
			display: block;
		}

		&.field-section-icons {
			.icon {
				position: absolute;
				inset-block-start: 0;
				inset-inline-start: 0;
				width: $icon-size;
				height: $icon-size;
				color: $icon-color;
				font-size: $form-font-size;
				pointer-events: none;
				z-index: $zindex-multi;
				padding-inline-start: $icon-size;
			}

			.input,
			.select select {
				padding-inline-start: $icon-size;
			}

			.input,
			.select {
				~ .icon {
					font-size: $form-font-size;
				}

				&:focus-visible {
					~ .icon,
					.icon {
						color: $icon-active-color;
					}
				}

				&.input-sm,
				&.select-sm {
					~ .icon,
					.icon {
						font-size: $form-font-size-sm;
					}
				}

				&.input-lg,
				&.select-lg {
					~ .icon,
					.icon {
						font-size: $form-font-size-lg;
					}
				}
			}

			&.field-section-icon-right {
				.input {
					padding-inline: $control-padding-horizontal;

					~ .icon {
						inset-inline-start: unset;
						inset-inline-end: 0;
					}
				}

				.select {
					~ .icon {
						inset-inline-start: unset;
						inset-inline-end: 2.25em;
					}
				}

				.input,
				.select select {
					padding-inline-end: $icon-size;
				}

				.input[type='date'] {
					position: relative;

					&::-webkit-calendar-picker-indicator {
						position: absolute;
						width: 1.5em;
						background: none;
						color: transparent;
						inset-inline-end: 0;
						z-index: $zindex-dropdown;
					}
				}
			}
		}
	}

	// Modifiers

	&.field-addons {
		display: flex;
		justify-content: flex-start;

		.field-section {
			&:not(:last-child) {
				margin-inline-end: -1px;
			}

			&:first-child {
				.button,
				.input,
				.select select {
					border-start-end-radius: 0;
					border-end-end-radius: 0;
				}
			}

			&:last-child {
				.button,
				.input,
				.select select {
					border-start-start-radius: 0;
					border-end-start-radius: 0;
				}
			}

			&:not(:first-child):not(:last-child) {
				.button,
				.input,
				.select select {
					border-radius: 0;
				}
			}
		}
	}
}

.required-indicator::after,
::part(required-indicator)::after {
	color: $danger;
	content: '*';
	vertical-align: baseline;
}
